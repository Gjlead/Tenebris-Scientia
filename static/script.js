document.addEventListener('DOMContentLoaded', function(){

    const newsShortData = [
        {id: 'shopDone', title: 'Potion shop is now open!', content: `<span class='date'>${getDate(2)}</span><br \\>After a lot of tinkering, unforeseen setbacks and a lot of trouble, the potion shop is finally online! We met once again with the enchanting Professor Liquium, responsible for the potion courses and the driving force behind the new potion shop: "We fired the web designer responsible for the long delays... <a href='news#shopDone'>[Read more here]</a>`},
        {id: 'poetry', title: 'Winners of the poetry competition announced', content: `<span class='date'>${getDate(12)}</span><br \\>Exciting news for all fans of poetry! This year's winners of the poetry competition have been announced: The consolation prize goes to Seamus Fondran with his humorous entry about the Japanese language courses he attended at the university: 四 (Four)<br \\>Third places goes to... <a href='news#poetry'>[Read more here]</a>`},
        {id: 'brainFreeze', title: 'Breakthrough in the research of protective counter curses!', content: `<span class='date'>${getDate(17)}</span><br \\>Another success for Tenebris scientia University! The venerable Professor Marden vys Oscurus of the Dark Arts Department and a team of other faculty members and alumni have succeeded in discovering a counter-curse to the Brain Freeze Curse. The curse, which originated as a harmless prank among students... <a href='news#brainFreeze'>[Read more here]</a>`},
        {id: 'constructShop', title: 'Work has started on long-awaited potion shop!', content: `<span class='date'>${getDate(22)}</span><br \\>After rumors about the establishment of a potion shop have been circulating for a long time now, we can proudly announce today that such a feature will indeed be added to our university\'s website. In collaboration with some eager upper-year students and Potions Professor Amandra Liquium... <a href='news#constructShop'>[Read more here]</a>`},
        {id: 'trollRights', title: 'Tenebris scientia campaigns for the rights of troll fighters', content: `<span class='date'>${getDate(38)}</span><br \\>With slogans such as "Their bodies, their culture, their choice!", "Day or night - let them fight!" or "We are here, we are loud, to keep the fights clean and allowed!", hundreds of students at Tenebris scientia University sided with troll fighters for the eighth week in a row. They are criticizing the High Council\'s plans to ban... <a href='news#trollRights'>[Read more here]</a>`},
        {id: 'legalWinNecr', title: 'Tenebris scientia wins legal dispute over necromancy courses', content: `<span class='date'>${getDate(51)}</span><br \\>Good news for Tenebris scientia! After several months of wrangling with the magic committees and courts, the university's counterclaim has been upheld and the courses on necromancy for beginners and necromancy for advanced students will remain part of the curriculum. The ruling was preceded by a lawsuit... <a href='news#legalWinNecr'>[Read more here]</a>`}
    ];

    const newsLongData = [
        {id: 'shopDone', title: 'Potion shop is now open!', content: `<span class='date'>${getDate(2)}</span><br \\>After a lot of tinkering, unforeseen setbacks and a lot of trouble, the Potion Shop is finally online! We met once again with the enchanting Professor Liquium, responsible for the potion courses and the driving force behind the new potion shop: "We fired the web designer responsible for the long delays straight away, of course," she says, still a little angry. Then her face brightens. "The store is an absolute success! We've already received hundreds of inquiries in just a few days, and our slav... - I mean highly motivated students are working around the clock to meet the demand." That sounds like good news through and through! Is there anything else the professor would like to tell us? "Just one thing," she replies, looking a little confused. "For some reason, some people just order ordinary water. Guys, what are you doing?"`},
        {id: 'poetry', title: 'Winners of the poetry competition announced', content: `<span class='date'>${getDate(12)}</span><br \\>Exciting news for all fans of poetry! This year's winners of the poetry competition have been announced: The consolation prize goes to Seamus Fondran with his humorous entry about the Japanese language courses he attended at the university: 四 (Four)<br \\>Third place goes to Filiez Warring with her fantastic story about - well, read the poem for yourself! It's called The King's Last Gift.<br \\>First and second place were a real neck-and-neck race this year. In the end, however, the judges had to come to a decision - completely impartially, of course. Thomas Marten's tearjerking Lady Moon took second place, while Meera Stelling's magnificent Tenebris scientia narrowly but deservedly took first place and the prize of one hundred Aurum! Congratulations! As always, all the winning poems can be read on our poetry competition page.`},
        { id: 'brainFreeze', title: 'Breakthrough in the research of protective counter curses!', content: `<span class='date'>${getDate(17)}</span><br \\>Another success for Tenebris scientia University! The venerable Professor Marden vys Oscurus of the Dark Arts Department and a team of other faculty members and alumni have succeeded in discovering a counter-curse to the Brain Freeze Curse. The curse, which originated as a harmless prank among students, has steadily evolved over the last few decades and is now considered dangerous bodily harm in its more potent form. Survivors of brain freeze attacks often require weeks of physical and mental care, and many suffer permanent loss of mental capacity. The less fortunate sometimes succumb to the attack even months later because the tiny shards of ice produced by the curse have caused too much damage to the victim's brain. Although there are still no better treatment options available for sufferers who were cursed a long time ago, this latest success by the university means that it is now possible to nip the curse in the bud, or to provide first aid within a very short timespan of being cursed.<br \\>We would also like to take this opportunity to remind students of the consequences of their pranks and that curses should never be used lightly. There are better solutions to arguments and unrequited feelings of love than improvised curses. Hexes, for example.`},
        {id: 'constructShop', title: 'Work has started on long-awaited potion shop!', content: `<span class='date'>${getDate(22)}</span><br \\>After rumors about the establishment of a potion shop have been circulating for a long time now, we can proudly announce today that such a feature will indeed be added to our university\'s website. In collaboration with some eager upper-year students and Potions Professor Amandra Liquium, concepts have been developed for the personalized composition of ingredients and the sale of professionally brewed potions. "The idea of providing particularly talented students and the university itself with an opportunity to earn extra money in this way has been around for many years," Professor Liquium tells us. "A whole series of hearings and conceptualizations followed, regulations had to be adhered to, there were discussions about possible undesirable side effects due to a lack of experience in brewing potions. We didn't know how high the demand for such a service would be and whether it would be worth the effort for the university at all. But now the whole project is in the bag and we can get started!" laughs the four-time winner of the Potent Poisons Prize. Well, we wish you every success!`},
        {id: 'trollRights', title: 'Tenebris scientia campaigns for the rights of troll fighters', content: `<span class='date'>${getDate(38)}</span><br \\>With slogans such as "Their bodies, their culture, their choice!", "Day or night - let them fight!" or "We are here, we are loud, to keep the fights clean and allowed!", hundreds of students at Tenebris scientia University sided with troll fighters for the eighth week in a row. They are criticizing the High Council\'s plans to ban ritual fights, which are deeply rooted in troll culture. "I am angry and disappointed!" shouts Lysa Dengrish into the microphone. Lysa has been a student at the university for a year and a half and has taken the hulking figures of the trolls to her heart from the very beginning. "The High Council's plans are yet another attempt by the clueless old wizards in their ivory towers to suppress the culture of the trolls and remove them from our society. The trolls have a right to their battles. They may seem unnecessarily violent to outsiders, but in troll society they are an important part of growing up. Without winning a fight, a troll is not accepted as an adult part of society. Tell them, Mrurk!" "UUUURRRGK!" roars the teenage troll standing next to the student. The protests enter their eighth week. We will continue covering them for you.`},
        {id: 'legalWinNecr', title: 'Tenebris scientia wins legal dispute over necromancy courses', content: `<span class='date'>${getDate(51)}</span><br \\>Good news for Tenebris scientia! After several months of wrangling with the magic committees and courts, the university's counterclaim has been upheld and the courses on necromancy for beginners and necromancy for advanced students will remain part of the curriculum. The ruling was preceded by a lawsuit against the university, according to which the magical handling of the dead would be an unacceptable practice for the bereaved and the teaching of such skills would lead to further breaches of social norms. The High Court of Witchcraft has ruled that the right to education takes precedence over the right to self-determination after death and has referred to the high teaching standards of the university. Interested students are cordially invited to re-enroll in these courses.`}
    ];

    function populateNewsSection(sectionSelector, newsData){
        const newsSection = document.querySelector(sectionSelector);
        newsData.forEach(item => {
            const newsItem = document.createElement('div');
            newsItem.classList.add('news-item');
            newsItem.innerHTML = `<h2 id='${item.id}' class='news-title'>${item.title}</h2><p>${item.content}</p>`;
            newsSection.appendChild(newsItem);
        });
    }

    // Check if the news sections exist on the pages before populating
    const newsShortSection = document.querySelector('.newsShort');
    if (newsShortSection){
        populateNewsSection('.newsShort', newsShortData);
    }
    const newsLongSection = document.querySelector('.newsLong');
    if (newsLongSection){
        populateNewsSection('.newsLong', newsLongData);
    }
});


// Returns a date that was <daysAgo> days ago
function getDate(daysAgo){
    var date = new Date();
    date.setDate(date.getDate() - daysAgo);
    var dd = String(date.getDate()).padStart(2, '0');
    var mm = String(date.getMonth() + 1).padStart(2, '0');
    var yyyy = date.getFullYear();
    return `${dd}.${mm}.${yyyy}`
}
